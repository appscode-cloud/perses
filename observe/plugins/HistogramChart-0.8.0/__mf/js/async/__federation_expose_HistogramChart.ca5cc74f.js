"use strict";(self.webpackChunkHistogramChart=self.webpackChunkHistogramChart||[]).push([["827"],{8378:function(e,t,o){o.r(t),o.d(t,{HistogramChart:()=>x});var r=o(4246),n=o(8695),l=o(2629),i=o(6494),a=o(5409),s=o.n(a);let u={unit:"decimal"},h={defaultColor:"#56b4e9"};var d=o(5283),c=o(2054),m=o(6372),p=o(4538),f=o(6232),v=o(8286);function g(e){let{width:t,height:o,data:n,format:i,min:a,max:s,thresholds:u}=e,h=(0,l.useChartsTheme)(),d=(0,p.useMemo)(()=>n.buckets.map(e=>{let[t,o,r,n]=e;return{value:[parseFloat(o),parseFloat(r),parseFloat(n),t],itemStyle:{color:function(e,t,o,r){if(null==t?void 0:t.steps){let n=t.steps.map((n,l)=>e>=n.value?n.color??o.thresholds.palette[l]??t.defaultColor??r:null).filter(e=>null!==e);return n[n.length-1]??t.defaultColor??r}return(null==t?void 0:t.defaultColor)??r}(parseFloat(o),u,h,h.echartsTheme[0])}}}),[h,n.buckets,u]),c=(0,p.useMemo)(()=>{if(a)return a;if(d&&d[0]){var e;return Math.min(0,Math.floor((null===(e=d[0])||void 0===e?void 0:e.value[0])??0))}},[a,d]),m=(0,p.useMemo)(()=>{if(s)return s;if(d&&d[d.length-1]){var e;return Math.ceil((null===(e=d[d.length-1])||void 0===e?void 0:e.value[1])??1)}},[s,d]),f=(0,p.useMemo)(()=>d?{title:{show:!1},tooltip:{},xAxis:{scale:!1,min:c,max:m},yAxis:(0,l.getFormattedAxis)({},i),series:[{type:"custom",renderItem:function(e,t){var o,r;let n=t.value(2),l=t.coord([t.value(0),n]),i=null===(o=t.size)||void 0===o?void 0:o.call(t,[t.value(1)-t.value(0),n]),a=null===(r=t.style)||void 0===r?void 0:r.call(t);return{type:"rect",shape:{x:l[0],y:l[1],width:i[0],height:i[1]},style:a}},label:{show:!1},dimensions:["from","to"],encode:{x:[0,1],y:2,tooltip:[0,1],itemName:2},data:d}]}:h.noDataOption,[h.noDataOption,i,m,c,d]);return(0,r.jsx)(l.EChart,{sx:{width:t,height:o,padding:`${h.container.padding.default}px`},option:f,theme:h.echartsTheme})}(0,f.D)([v.N]);let x={PanelComponent:function(e){let{spec:t,contentDimensions:o,queryResults:n}=e,{min:i,max:a}=t,f=(0,l.useChartsTheme)(),v=s()({},u,t.format),x=s()({},h,t.thresholds),C=(0,p.useMemo)(()=>{let e=[];for(let t of n)for(let o of t.data.series){if(!o.histograms||0===o.histograms.length)continue;let[,t]=o.histograms[0];t&&t.buckets&&e.push({buckets:t.buckets})}return e},[n]);if(0===C.length)return(0,r.jsx)(d.Z,{justifyContent:"center",height:"100%",children:(0,r.jsx)(c.Z,{variant:"body2",textAlign:"center",children:"No data available (only native histograms are supported for now)"})});if(void 0===o)return null;let b=o.width/C.length-f.container.padding.default;return b<90&&C.length>1&&(b=90),(0,r.jsx)(d.Z,{direction:"row",justifyContent:"center",alignItems:"center",sx:{overflowX:C.length>1?"scroll":"auto"},children:C.map((e,t)=>(0,r.jsx)(m.Z,{children:(0,r.jsx)(g,{width:b,height:o.height,data:e,format:v,min:i,max:a,thresholds:x})},`histogram-series-${t}`))})},supportedQueryTypes:["TimeSeriesQuery"],queryOptions:{mode:"instant"},panelOptionsEditorComponents:[{label:"Settings",content:function(e){let{onChange:t,value:o}=e,a=s()({},u,o.format),d=s()({},h,o.thresholds),c="Enter value";"percent"===a.unit?c="0":"percent-decimal"===a.unit&&(c="0");let m="Enter value";return"percent"===a.unit?m="100":"percent-decimal"===a.unit&&(m="1"),(0,r.jsxs)(l.OptionsEditorGrid,{children:[(0,r.jsx)(l.OptionsEditorColumn,{children:(0,r.jsxs)(l.OptionsEditorGroup,{title:"Misc",children:[(0,r.jsx)(l.FormatControls,{value:a,onChange:e=>{t((0,i.produce)(o,t=>{t.format=e}))}}),(0,r.jsx)(l.OptionsEditorControl,{label:"Min",control:(0,r.jsx)(n.Z,{type:"number",value:o.min??"",onChange:e=>{let r=e.target.value?Number(e.target.value):void 0;t((0,i.produce)(o,e=>{e.min=r}))},placeholder:c,sx:{width:"100%"}})}),(0,r.jsx)(l.OptionsEditorControl,{label:"Max",control:(0,r.jsx)(n.Z,{type:"number",value:o.max??"",onChange:e=>{let r=e.target.value?Number(e.target.value):void 0;t((0,i.produce)(o,e=>{e.max=r}))},placeholder:m,sx:{width:"100%"}})})]})}),(0,r.jsx)(l.OptionsEditorColumn,{children:(0,r.jsx)(l.ThresholdsEditor,{thresholds:d,onChange:e=>{t((0,i.produce)(o,t=>{t.thresholds=e}))}})})]})}}],createInitialOptions:function(){return{format:u}}}}}]);