"use strict";(self.webpackChunkBarChart=self.webpackChunkBarChart||[]).push([["163"],{14046:function(e,t,n){n.d(t,{K2:()=>a,c7:()=>r,gO:()=>i});let a="last",r={first:function(e){return l(e,"first")},last:function(e){return l(e,"last")},"first-number":function(e){return l(e,"first-number")},"last-number":function(e){return l(e,"last-number")},mean:function(e){return l(e,"mean")},sum:function(e){return l(e,"sum")},min:function(e){return l(e,"min")},max:function(e){return l(e,"max")}},i={first:{label:"First",description:"First value"},last:{label:"Last",description:"Last value"},"first-number":{label:"First *",description:"First numeric value"},"last-number":{label:"Last *",description:"Last numeric value"},mean:{label:"Avg",description:"Average value excluding nulls"},sum:{label:"Sum",description:"The sum of all values"},min:{label:"Min",description:"Minimum value"},max:{label:"Max",description:"Maximum value"}};function l(e,t){return function(e,t){let n=t.reduce((e,t)=>(e[t]=void 0,e),{}),a=0,r=0;return e.forEach((t,i)=>{let l=t[1];0===i&&"first"in n&&(n.first=l),i===e.length-1&&"last"in n&&(n.last=l),"number"==typeof l&&(a+=1,r+=l,"first-number"in n&&void 0===n["first-number"]&&(n["first-number"]=l),"last-number"in n&&(n["last-number"]=l),"min"in n&&("number"!=typeof n.min?n.min=l:n.min=Math.min(n.min,l)),"max"in n&&("number"!=typeof n.max?n.max=l:n.max=Math.max(n.max,l)))}),a>0&&"sum"in n&&(n.sum=r),a>0&&"mean"in n&&(n.mean=r/a),n}(e,[t])[t]}},70424:function(e,t,n){n.r(t),n.d(t,{BarChart:()=>O});var a=n(14046);let r={unit:"decimal",shortValues:!0},i="desc",l="value";var u=n(24246),o=n(48565),s=n(72629),c=n(74664),m=n(58891),d=n(96494),h=n(15409),p=n.n(h),f=n(36372),v=n(8218),b=n(36232),x=n(508),g=n(65201),C=n(99635),y=n(23709),j=n(67745),w=n(50378);function M(e){let{width:t,height:n,data:a,format:r={unit:"decimal"},mode:i="value"}=e,l=(0,s.useChartsTheme)(),o=(0,v.useMemo)(()=>{if(!a||!a.length)return l.noDataOption;let e=[];return a.map(t=>{e.push([t.label,t.value])}),{title:{show:!1},dataset:[{dimensions:["label","value"],source:e}],xAxis:(0,s.getFormattedAxis)({},r),yAxis:{type:"category",splitLine:{show:!1},axisLabel:{overflow:"truncate",width:t/3}},series:{type:"bar",label:{show:!0,position:"right",formatter:e=>e.data[1]?"percentage"===i?(0,c.Bw)(e.data[1],{unit:"percent",decimalPlaces:r.decimalPlaces}):(0,c.Bw)(e.data[1],r):void 0,barMinWidth:14,barCategoryGap:6},itemStyle:{borderRadius:4,color:l.echartsTheme[0]}},tooltip:{appendToBody:!0,confine:!0,formatter:e=>e.data[1]&&`<b>${e.name}</b> &emsp; ${(0,c.Bw)(e.data[1],r)}`},grid:{left:"5%",right:"5%"}}},[a,l,t,i,r]);return(0,u.jsx)(f.Z,{style:{width:t,height:n},sx:{overflow:"auto"},children:(0,u.jsx)(s.EChart,{sx:{minHeight:n,height:a?20*a.length:"100%"},option:o,theme:l.echartsTheme})})}(0,b.D)([x.N,g.N,C.N,y.N,j.N,w.N]);let O={PanelComponent:function(e){let{spec:{calculation:t,format:n,sort:r,mode:l},contentDimensions:o,queryResults:c}=e,m=(0,s.useChartsTheme)().container.padding.default,d=(0,v.useMemo)(()=>{let e=a.c7[t],n=[];for(let t of c)for(let a of t.data.series){let t={value:e(a.values)??null,label:a.formattedName??""};n.push(t)}let u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i;return"asc"===t?e.sort((e,t)=>null===e.value?1:null===t.value?-1:e.value===t.value?0:e.value<t.value?1:-1):e.sort((e,t)=>null===e.value?-1:null===t.value?1:e.value===t.value?0:e.value<t.value?-1:1)}(n,r);return"percentage"===l?function(e){let t=e.reduce((e,t)=>{let{value:n}=t;return e+(n??0)},0);return e.map(e=>{let n=(e.value??0)/t*100;return{...e,value:n}})}(u):u},[c,r,l,t]);return void 0===o?null:(0,u.jsx)(f.Z,{sx:{padding:`${m}px`},children:(0,u.jsx)(M,{width:o.width-2*m,height:o.height-2*m,data:d,format:n,mode:l})})},panelOptionsEditorComponents:[{label:"Settings",content:function(e){let{onChange:t,value:n}=e,h=p()({},r,n.format);return(0,u.jsxs)(s.OptionsEditorGrid,{children:[(0,u.jsx)(s.OptionsEditorColumn,{children:(0,u.jsxs)(s.OptionsEditorGroup,{title:"Misc",children:[(0,u.jsx)(s.FormatControls,{value:h,onChange:e=>{t((0,d.produce)(n,t=>{t.format=e}))},disabled:"percentage"===n.mode}),(0,u.jsx)(m.CalculationSelector,{value:n.calculation,onChange:e=>{t((0,d.produce)(n,t=>{t.calculation=e}))}}),(0,u.jsx)(s.SortSelector,{value:n.sort,onChange:e=>{t((0,d.produce)(n,t=>{t.sort=e}))}}),(0,u.jsx)(s.ModeSelector,{value:n.mode,onChange:e=>{t((0,d.produce)(n,t=>{t.mode=e}))},disablePercentageMode:(0,c.PX)(h)})]})}),(0,u.jsx)(s.OptionsEditorColumn,{children:(0,u.jsx)(s.OptionsEditorGroup,{title:"Reset Settings",children:(0,u.jsx)(o.Z,{variant:"outlined",color:"secondary",onClick:()=>{t((0,d.produce)(n,e=>{e.calculation=a.K2,e.format=r,e.sort=i,e.mode=l}))},children:"Reset To Defaults"})})})]})}}],supportedQueryTypes:["TimeSeriesQuery"],createInitialOptions:function(){return{calculation:a.K2,format:r,sort:i,mode:l}}}}}]);