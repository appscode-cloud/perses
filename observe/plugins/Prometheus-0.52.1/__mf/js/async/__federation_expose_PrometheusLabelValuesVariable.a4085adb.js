"use strict";(self.webpackChunkPrometheus=self.webpackChunkPrometheus||[]).push([["6925"],{74081:function(e,a,l){a.default=void 0;var r,t=(r=l(30265))&&r.__esModule?r:{default:r};a.default=(0,t.default)("M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,19V6H20V4H15V3H9M9,8H11V17H9V8M13,8H15V17H13V8Z","TrashCan")},96114:function(e,a,l){l.r(a),l.d(a,{PrometheusLabelValuesVariable:()=>s});var r=l(58891),t=l(87629),n=l(90726);let s={getVariableOptions:async(e,a)=>{let l=await a.datasourceStore.getDatasourceClient(e.datasource??t.Mm),s=e.matchers?e.matchers.map(e=>(0,r.replaceVariables)(e,a.variables)):void 0,o=(0,t.Bf)(a.timeRange),{data:u}=await l.labelValues({labelName:(0,r.replaceVariables)(e.labelName,a.variables),"match[]":s,...o});return{data:(0,n.LY)(u)}},dependsOn:e=>{var a;return{variables:(null===(a=e.matchers)||void 0===a?void 0:a.map(e=>(0,r.parseVariables)(e)).flat().concat((0,r.parseVariables)(e.labelName)))||[]}},OptionsEditorComponent:n.xA,createInitialOptions:()=>({labelName:""})}},90726:function(e,a,l){l.d(a,{gB:()=>x,LY:()=>C,g3:()=>g,ik:()=>y,xA:()=>p,qT:()=>f});var r=l(24246),t=l(25283),n=l(90192),s=l(8695),o=l(58891),u=l(75586),d=l(82901),i=l(87629),c=l(36372),h=l(75094),m=l(48565),v=l(74081);function b(e){let{matchers:a,onChange:l,isReadonly:n}=e;return(0,r.jsxs)(t.Z,{spacing:1,mb:2,children:[a.map((e,t)=>(0,r.jsxs)(c.Z,{display:"flex",children:[(0,r.jsx)(s.Z,{fullWidth:!0,label:"Series Selector",value:e,InputProps:{readOnly:n},onChange:e=>{l((0,u.Uy)(a,a=>{a[t]=e.target.value}))}}),(0,r.jsx)(h.Z,{onClick:()=>{l((0,u.Uy)(a,e=>{e.splice(t,1)}))},disabled:n,children:(0,r.jsx)(v.default,{})})]},t)),(0,r.jsx)(c.Z,{children:(0,r.jsx)(m.Z,{fullWidth:!1,color:"secondary",variant:"outlined",onClick:()=>{l((0,u.Uy)(a,e=>{e.push("")}))},disabled:n,children:"Add Series Selector"})})]})}function p(e){let{onChange:a,value:l}=e,{datasource:d}=l,c=d??i.Mm;return(0,r.jsxs)(t.Z,{spacing:2,children:[(0,r.jsx)(n.Z,{margin:"dense",children:(0,r.jsx)(o.DatasourceSelect,{datasourcePluginKind:"PrometheusDatasource",value:c,onChange:e=>{if((0,i.sv)(e)){a((0,u.Uy)(l,a=>{a.datasource=(0,i.Rv)(e)?void 0:e}));return}throw Error("Got unexpected non-Prometheus datasource selector")},readOnly:e.isReadonly,labelId:"prom-datasource-label",label:"Prometheus Datasource"})}),(0,r.jsx)(s.Z,{label:"Label Name",required:!0,value:e.value.labelName,onChange:a=>{e.onChange({...e.value,labelName:a.target.value})},InputProps:{readOnly:e.isReadonly}}),(0,r.jsx)(b,{matchers:e.value.matchers??[],onChange:a=>{e.onChange({...e.value,matchers:a})},isReadonly:e.isReadonly})]})}function g(e){let{onChange:a,value:l}=e,{datasource:s}=l,d=s??i.Mm;return(0,r.jsxs)(t.Z,{spacing:2,children:[(0,r.jsx)(n.Z,{margin:"dense",children:(0,r.jsx)(o.DatasourceSelect,{datasourcePluginKind:"PrometheusDatasource",value:d,onChange:e=>{if((0,i.sv)(e)){a((0,u.Uy)(l,a=>{a.datasource=(0,i.Rv)(e)?void 0:e}));return}throw Error("Got unexpected non-Prometheus datasource selector")},disabled:e.isReadonly,labelId:"prom-datasource-label",label:"Prometheus Datasource"})}),(0,r.jsx)(b,{matchers:e.value.matchers??[],isReadonly:e.isReadonly,onChange:a=>{e.onChange({...e.value,matchers:a})}})]})}function f(e){let{onChange:a,value:l}=e,{datasource:c}=l,h=c??i.Mm,{data:m}=(0,o.useDatasourceClient)(h),v=null==m?void 0:m.options.datasourceUrl;return(0,r.jsxs)(t.Z,{spacing:2,children:[(0,r.jsx)(n.Z,{margin:"dense",children:(0,r.jsx)(o.DatasourceSelect,{datasourcePluginKind:i.nY,value:h,onChange:e=>{if((0,i.sv)(e)){a((0,u.Uy)(l,a=>{a.datasource=(0,i.Rv)(e)?void 0:e}));return}throw Error("Got unexpected non-Prometheus datasource selector")},labelId:"prom-datasource-label",label:"Prometheus Datasource",disabled:e.isReadonly})}),(0,r.jsx)(d.P,{completeConfig:{remote:{url:v}},value:l.expr,datasource:h,onBlur:a=>{e.onChange({...e.value,expr:a.target.textContent??""})},readOnly:e.isReadonly,width:"100%"}),(0,r.jsx)(s.Z,{label:"Label Name",value:e.value.labelName,InputProps:{readOnly:e.isReadonly},onChange:a=>{e.onChange({...e.value,labelName:a.target.value})}})]})}function x(e,a){let l=new Set;for(let r of e.result){let e=r.metric[a];void 0!==e&&l.add(e)}return Array.from(l.values())}function y(e,a){let l=new Set;for(let r of e.result){let e=r.metric[a];void 0!==e&&l.add(e)}return Array.from(l.values())}let C=e=>e?e.map(e=>({value:e,label:e})):[]}}]);