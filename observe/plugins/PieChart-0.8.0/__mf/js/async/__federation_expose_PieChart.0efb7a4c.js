"use strict";(self.webpackChunkPieChart=self.webpackChunkPieChart||[]).push([["703"],{37931:function(e,t,l){l.r(t),l.d(t,{PieChart:()=>$});var n=l(14046);let r={unit:"decimal",shortValues:!0},a="desc";var i=l(24246),o=l(15409),s=l.n(o),u=l(58891),d=l(75586),h=l(72629),c=l(74664),m=l(48565),g=l(94776),p=l(36372),v=l(8193),f=l(54538),x=l(83915);let C=new x.Z({hue:{min:20,max:360}}),y=new x.Z({hue:{min:0,max:20}}),w={};var S=l(36232),j=l(85731),b=l(65201),O=l(99635),P=l(23709),E=l(67745),N=l(50378);function T(e){let{width:t,height:l,data:n}=e,r=(0,h.useChartsTheme)(),a={title:{text:"Referer of a Website",subtext:"Fake Data",left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},axisLabel:{overflow:"truncate",width:t/3},series:[{name:"Access From",type:"pie",radius:"55%",label:!1,center:["40%","50%"],data:n,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}],itemStyle:{borderRadius:2,color:r.echartsTheme[0]}};return(0,i.jsx)(p.Z,{style:{width:t,height:l},sx:{overflow:"auto"},children:(0,i.jsx)(h.EChart,{sx:{minHeight:l,height:n?16*n.length:"100%"},option:a,theme:r.echartsTheme})})}(0,S.D)([j.N,b.N,O.N,P.N,E.N,N.N]);let $={PanelComponent:function(e){let{spec:{calculation:t,sort:l,mode:r},contentDimensions:o,queryResults:d}=e,c=(0,h.useChartsTheme)(),m=(0,g.Z)(),x=c.container.padding.default,S=(0,h.useId)("time-series-panel"),j=c.echartsTheme.color,{pieChartData:b,legendItems:O}=(0,f.useMemo)(()=>{let e=n.c7[t],i=[],o=[];for(let t=0;t<d.length;t++){let l=d[t],n=0;for(let t of(null==l?void 0:l.data.series)??[]){let l=function(e){let{categoricalPalette:t,muiPrimaryColor:l,seriesName:n}=e;return function(e,t){var l;return function(e,t){let l=`${e}_____${t}`,n=w[l];return n||(n=function(e,t){let[l,n,r]=t?y.hsl(e):C.hsl(e),a=`${(100*n).toFixed(0)}%`,i=`${(100*r).toFixed(0)}%`;return`hsla(${l.toFixed(2)},${a},${i},0.9)`}(e,t),w[l]=n),n}(l=e,l.toLowerCase().includes("error"))??t}(n,Array.isArray(t)&&t[0]?t[0]:l)}({categoricalPalette:j,muiPrimaryColor:m.palette.primary.main,seriesName:t.name}),r={value:e(t.values)??null,name:t.formattedName??"",itemStyle:{color:l}};i.push(r);let a=S+t.name+n;o.push({id:a,label:r.name,color:l}),n++}}let s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;return"asc"===t?e.sort((e,t)=>null===e.value?1:null===t.value?-1:e.value===t.value?0:e.value<t.value?1:-1):e.sort((e,t)=>null===e.value?-1:null===t.value?1:e.value===t.value?0:e.value<t.value?-1:1)}(i,l);return"percentage"===r?{pieChartData:function(e){let t=e.reduce((e,t)=>{let{value:l}=t;return e+(l??0)},0);return e.map(e=>{let l=(e.value??0)/t*100;return{...e,value:l}})}(s),legendItems:o}:{pieChartData:s,legendItems:o}},[t,l,r,d,j,m.palette.primary.main,S]),P=c.container.padding.default,E=o?{width:o.width-2*P,height:o.height-2*P}:void 0,N=(0,f.useMemo)(()=>e.spec.legend&&(0,u.validateLegendSpec)(e.spec.legend)?s()({},v.zx,e.spec.legend):void 0,[e.spec.legend]),[$,L]=(0,f.useState)("ALL"),[M,Z]=(0,f.useState)(),k=(0,f.useRef)(null);return void 0===o?null:(0,i.jsx)(p.Z,{sx:{padding:`${x}px`},children:(0,i.jsx)(h.ContentWithLegend,{width:(null==E?void 0:E.width)??400,height:(null==E?void 0:E.height)??1e3,minChildrenHeight:50,legendSize:null==N?void 0:N.size,legendProps:N&&{options:N,data:O,selectedItems:$,onSelectedItemsChange:L,tableProps:{columns:[],sorting:M,onSortingChange:Z},onItemMouseOver:(e,t)=>{var l;let{id:n}=t;null===(l=k.current)||void 0===l||l.highlightSeries({name:n})},onItemMouseOut:()=>{var e;null===(e=k.current)||void 0===e||e.clearHighlightedSeries()}},children:e=>{let{height:t,width:l}=e;return(0,i.jsx)(p.Z,{style:{height:t,width:l},children:(0,i.jsx)(T,{data:b,width:o.width-2*x,height:o.height-2*x})})}})})},panelOptionsEditorComponents:[{label:"Settings",content:function(e){let{onChange:t,value:l}=e,n=s()({},r,l.format);return(0,i.jsxs)(h.OptionsEditorGrid,{children:[(0,i.jsxs)(h.OptionsEditorColumn,{children:[(0,i.jsx)(u.LegendOptionsEditor,{value:l.legend,onChange:e=>{t((0,d.Uy)(l,t=>{t.legend=e}))}}),(0,i.jsxs)(h.OptionsEditorGroup,{title:"Misc",children:[(0,i.jsx)(h.FormatControls,{value:n,onChange:e=>{t((0,d.Uy)(l,t=>{t.format=e}))},disabled:"percentage"===l.mode}),(0,i.jsx)(u.CalculationSelector,{value:l.calculation,onChange:e=>{t((0,d.Uy)(l,t=>{t.calculation=e}))}}),(0,i.jsx)(h.SortSelector,{value:l.sort,onChange:e=>{t((0,d.Uy)(l,t=>{t.sort=e}))}}),(0,i.jsx)(h.ModeSelector,{value:l.mode,onChange:e=>{t((0,d.Uy)(l,t=>{t.mode=e}))},disablePercentageMode:(0,c.PX)(n)})]})]}),(0,i.jsx)(h.OptionsEditorColumn,{children:(0,i.jsx)(h.OptionsEditorGroup,{title:"Reset Settings",children:(0,i.jsx)(m.Z,{variant:"outlined",color:"secondary",onClick:()=>{t((0,d.Uy)(l,e=>{e.legend=void 0}))},children:"Reset To Defaults"})})})]})}}],supportedQueryTypes:["TimeSeriesQuery"],createInitialOptions:function(){return{calculation:n.K2,format:r,radius:50,sort:a,mode:"value"}}}}}]);