"use strict";(self.webpackChunkTimeSeriesTable=self.webpackChunkTimeSeriesTable||[]).push([["972"],{65990:function(e,n,s){s.r(n),s.d(n,{TimeSeriesTable:()=>C});var t=s(24246),r=s(36372),i=s(72629),l=s(54538),a=s(52054),c=s(315),o=s(90190),h=s(56174),d=s(25283),u=s(14968),x=s(96205),m=s(31889);function j(e){let{name:n,labels:s,formattedName:r,isFormatted:i}=e;return i&&s&&Object.keys(s).length>0?(0,t.jsx)(p,{labels:s}):(0,t.jsx)(a.Z,{sx:{textWrap:"auto"},children:r??n})}function p(e){let{labels:n}=e,{infoSnackbar:s}=(0,i.useSnackbar)(),r=[],l=!0;function c(e){let n=e.currentTarget.innerText||"";navigator.clipboard.writeText(n.trim()).then(()=>{s(`Copied label matcher: ${n}`)}).catch(e=>{console.error(`unable to copy text: ${e}`)})}for(let e in n)"__name__"!==e&&(r.push((0,t.jsxs)("span",{children:[!l&&", ",(0,t.jsxs)(a.Z,{display:"inline",component:"span",sx:{"&:hover":{cursor:"pointer",textDecoration:"underline"}},onClick:c,title:"Click to copy label matcher",children:[(0,t.jsx)("strong",{children:e}),"=",(0,t.jsxs)("span",{children:['"',n[e],'"']})]})]},e)),l&&(l=!1));return(0,t.jsxs)(a.Z,{sx:{textWrap:"auto"},children:[n?n.__name__:"","{",r,"}"]})}var g=s(32600),Z=s(4338),f=s.n(Z);function b(e){let{kind:n,spec:s,queryResults:r}=e,{ref:l,width:a=1,height:c=1}=f()();return(0,t.jsx)("div",{ref:l,style:{height:"100%"},children:(0,t.jsx)(i.ErrorBoundary,{FallbackComponent:i.ErrorAlert,children:(0,t.jsx)(g.PanelPluginLoader,{kind:n,contentDimensions:{width:a,height:c},spec:s,queryResults:r})})})}let v=e=>{let{queryResults:n}=e,s=(0,l.useMemo)(()=>n.flatMap(e=>e.data).flatMap(e=>(null==e?void 0:e.series)||[]),[n]),i=(0,l.useMemo)(()=>(function(e,n){let s=e.length<1e3;return e.map((e,i)=>{var l;let c=((null===(l=e.values)||void 0===l?void 0:l.length)??0)>1,o=e.values?e.values.map((e,n)=>(0,t.jsxs)(a.Z,{children:[e[1]," ",c&&(0,t.jsxs)("span",{children:["@",e[0]]})]},n)):[],h=null;if(e.histograms&&e.histograms.length>0){let s={...n[0],data:{...n[0].data,series:[n[0].data.series[i]]}};h=e.histograms.map((e,n)=>(0,t.jsxs)(d.Z,{alignItems:"center",children:[(0,t.jsx)(r.Z,{width:400,height:200,children:(0,t.jsx)(b,{kind:"HistogramChart",spec:{unit:"decimal",width:400,height:200},queryResults:[s]})}),(0,t.jsxs)(d.Z,{flexDirection:"row",justifyContent:"space-between",width:"100%",children:[(0,t.jsxs)(a.Z,{children:["Total count: ",e[1].count]}),(0,t.jsxs)(a.Z,{children:["Sum: ",e[1].sum]})]}),w(e[1])]},-n))}return(0,t.jsxs)(u.Z,{style:{whiteSpace:"pre"},children:[(0,t.jsx)(x.Z,{children:(0,t.jsx)(j,{name:e.name,formattedName:e.formattedName,labels:e.labels,isFormatted:s})}),(0,t.jsx)(x.Z,{children:e.histograms?h:o})]},i)})})(s,n),[s,n]);return n?(0,t.jsxs)(t.Fragment,{children:[s.length>=1e3&&(0,t.jsxs)(c.Z,{severity:"warning",children:["Showing more than ",1e3," series, turning off label formatting for performance reasons."]}),(0,t.jsx)(o.Z,{className:"data-table",children:(0,t.jsx)(h.Z,{children:i})})]}):(0,t.jsx)(a.Z,{children:"No data"})},y=e=>3===e||1===e?"[":"(",T=e=>3===e||0===e?"]":")",k=e=>{let[n,s,t]=e;return`${y(n)}${s} -> ${t}${T(n)}`},w=e=>{var n;return(0,t.jsxs)(o.Z,{children:[(0,t.jsx)(m.Z,{children:(0,t.jsx)(u.Z,{children:(0,t.jsx)(x.Z,{style:{textAlign:"center"},colSpan:2,children:"Histogram Sample"})})}),(0,t.jsxs)(h.Z,{children:[(0,t.jsxs)(u.Z,{children:[(0,t.jsx)(x.Z,{children:"Range"}),(0,t.jsx)(x.Z,{children:"Count"})]}),null===(n=e.buckets)||void 0===n?void 0:n.map((e,n)=>(0,t.jsxs)(u.Z,{children:[(0,t.jsx)(x.Z,{children:k(e)}),(0,t.jsx)(x.Z,{children:e[3]})]},n))]})]})},C={PanelComponent:function(e){let{contentDimensions:n,queryResults:s}=e,l=(0,i.useChartsTheme)().container.padding.default;return(0,t.jsx)(r.Z,{sx:{height:(null==n?void 0:n.height)||0,padding:`${l}px`,overflowY:"scroll"},children:(0,t.jsx)(v,{queryResults:s})})},supportedQueryTypes:["TimeSeriesQuery"],queryOptions:{mode:"instant"},createInitialOptions:()=>({})}}}]);