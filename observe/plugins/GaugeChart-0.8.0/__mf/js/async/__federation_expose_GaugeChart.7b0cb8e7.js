(self.webpackChunkGaugeChart=self.webpackChunkGaugeChart||[]).push([["225"],{14046:function(e,t,n){"use strict";n.d(t,{K2:()=>r,c7:()=>i,gO:()=>l});let r="last",i={first:function(e){return a(e,"first")},last:function(e){return a(e,"last")},"first-number":function(e){return a(e,"first-number")},"last-number":function(e){return a(e,"last-number")},mean:function(e){return a(e,"mean")},sum:function(e){return a(e,"sum")},min:function(e){return a(e,"min")},max:function(e){return a(e,"max")}},l={first:{label:"First",description:"First value"},last:{label:"Last",description:"Last value"},"first-number":{label:"First *",description:"First numeric value"},"last-number":{label:"Last *",description:"Last numeric value"},mean:{label:"Avg",description:"Average value excluding nulls"},sum:{label:"Sum",description:"The sum of all values"},min:{label:"Min",description:"Minimum value"},max:{label:"Max",description:"Maximum value"}};function a(e,t){return function(e,t){let n=t.reduce((e,t)=>(e[t]=void 0,e),{}),r=0,i=0;return e.forEach((t,l)=>{let a=t[1];0===l&&"first"in n&&(n.first=a),l===e.length-1&&"last"in n&&(n.last=a),"number"==typeof a&&(r+=1,i+=a,"first-number"in n&&void 0===n["first-number"]&&(n["first-number"]=a),"last-number"in n&&(n["last-number"]=a),"min"in n&&("number"!=typeof n.min?n.min=a:n.min=Math.min(n.min,a)),"max"in n&&("number"!=typeof n.max?n.max=a:n.max=Math.max(n.max,a)))}),r>0&&"sum"in n&&(n.sum=i),r>0&&"mean"in n&&(n.mean=i/r),n}(e,[t])[t]}},66070:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},50517:function(e){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},46560:function(e,t,n){var r=n(10263),i=n(66070),l=n(50517),a=n(24701),o=n(36468),u=Math.max;e.exports=function(e){if(!(e&&e.length))return[];var t=0;return e=r(e,function(e){if(o(e))return t=u(e.length,t),!0}),a(t,function(t){return i(e,l(t))})}},75940:function(e,t,n){var r=n(1197)(n(46560));e.exports=r},8189:function(e,t,n){"use strict";n.r(t),n.d(t,{GaugeChart:()=>k});let r={unit:"percent-decimal"};var i=n(24246),l=n(8695),a=n(72629),o=n(58891),u=n(96494),s=n(15409),c=n.n(s),h=n(25283),d=n(36372),m=n(66224),f=n(14046),p=n(54538),v=n(75940),g=n.n(v);let x={steps:[{value:0}]};var w=n(56141),b=n.n(w),C=n(74664),y=n(36232),j=n(78846),L=n(65201),M=n(23709),S=n(67745),E=n(50378);function T(e){let{width:t,height:n,data:r,format:l,axisLine:o,max:u}=e,s=(0,a.useChartsTheme)(),c=function(e,t){let n=(0,p.useRef)();return(void 0===n.current||!1===b()(t,n.current.deps))&&(n.current={value:e(),deps:t}),n.current.value}(()=>{var e;if(void 0===r.value)return s.noDataOption;let i=function(e,t,n,r){let i=Math.min(n,r)/(("number"==typeof e?(0,C.Bw)(e,t):`${e}`).length??2)*.7;return`clamp(3px, ${i}px, 24px)`}(r.value,l,t,n);return{title:{show:!1},tooltip:{show:!1},series:[{type:"gauge",center:["50%","65%"],radius:"86%",startAngle:200,endAngle:-20,min:0,max:u,silent:!0,progress:{show:!0,width:16,itemStyle:{color:"auto"}},pointer:{show:!1},axisLine:{lineStyle:{color:[[1,"rgba(127,127,127,0.35)"]],width:16}},axisTick:{show:!1,distance:0},splitLine:{show:!1},axisLabel:{show:!1,distance:-18,color:"#999",fontSize:12},anchor:{show:!1},title:{show:!1},detail:{show:!1},data:[{value:r.value}]},{type:"gauge",center:["50%","65%"],radius:"100%",startAngle:200,endAngle:-20,min:0,max:u,pointer:{show:!0,icon:t>170?"path://M12.8,0.7l12,40.1H0.7L12.8,0.7z":"none",length:10,width:5,offsetCenter:[0,"-49%"],itemStyle:{color:"auto"}},axisLine:o,axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1},detail:{show:!0,width:"60%",borderRadius:8,offsetCenter:[0,"-9%"],color:"inherit",fontSize:i,formatter:null===r.value?()=>"null":e=>(0,C.Bw)(e,l)},data:[{value:r.value,name:r.label,title:{show:!0,color:(null===(e=s.echartsTheme.textStyle)||void 0===e?void 0:e.color)??"inherit",offsetCenter:[0,"55%"],overflow:"truncate",fontSize:12,width:.8*t}}]}]}},[r,t,n,s,l,o,u]);return(0,i.jsx)(a.EChart,{sx:{width:t,height:n,padding:`${s.container.padding.default}px`},option:c,theme:s.echartsTheme})}(0,y.D)([j.N,L.N,M.N,S.N,E.N]);let O={label:"",value:void 0},k={PanelComponent:function(e){let{spec:t,contentDimensions:n,queryResults:l}=e,{calculation:o,max:u}=t,{thresholds:s}=(0,a.useChartsTheme)(),m=c()({},r,t.format),v=t.thresholds??x,w=(0,p.useMemo)(()=>{var e;if((null===(e=l[0])||void 0===e?void 0:e.data)===void 0)return[];void 0===f.c7[o]&&console.warn(`Invalid GaugeChart panel calculation ${o}, fallback to ${f.K2}`);let t=f.c7[o]??f.c7[f.K2],n=[];for(let e of l[0].data.series){let r={value:t(e.values),label:e.formattedName??""};n.push(r)}return n},[l,o]);if(void 0===n)return null;let b=u;void 0===b&&(b="percent"===m.unit?100:1);let C={show:!0,lineStyle:{width:5,color:function(e,t,n,r){let i=e.defaultColor??r.defaultColor,l=[[0,i]];if(void 0===e.steps)return l;{let t=e.steps.map(t=>"percent"===e.mode?t.value/100:t.value/n);t.push(1);let l=e.steps.map((e,t)=>e.color??r.palette[t]);return l.unshift(i),g()(t,l).map(e=>[e[0]??1,e[1]??i])}}(v,0,b,s)}};if(0===w.length)return(0,i.jsx)(T,{width:n.width,height:n.height,data:O,format:m,axisLine:C,max:b});let y=n.width/w.length-20;y<90&&w.length>1&&(y=90);let j=w.length>1;return(0,i.jsx)(h.Z,{direction:"row",spacing:2*!!j,justifyContent:j?"left":"center",alignItems:"center",sx:{overflowX:w.length>1?"scroll":"auto"},children:w.map((e,t)=>(0,i.jsx)(d.Z,{children:(0,i.jsx)(T,{width:y,height:n.height,data:e,format:m,axisLine:C,max:b})},`gauge-series-${t}`))})},LoadingComponent:function(e){let{contentDimensions:t}=e;return void 0===t?null:(0,i.jsx)(m.Z,{sx:{margin:"0 auto"},variant:"circular",width:t.width>t.height?t.height:t.width,height:t.height})},supportedQueryTypes:["TimeSeriesQuery"],panelOptionsEditorComponents:[{label:"Settings",content:function(e){let{onChange:t,value:n}=e,s=c()({},r,n.format),h="Enter value";return"percent"===s.unit?h="100":"percent-decimal"===s.unit&&(h="1"),(0,i.jsxs)(a.OptionsEditorGrid,{children:[(0,i.jsx)(a.OptionsEditorColumn,{children:(0,i.jsxs)(a.OptionsEditorGroup,{title:"Misc",children:[(0,i.jsx)(a.FormatControls,{value:s,onChange:e=>{t((0,u.produce)(n,t=>{t.format=e}))}}),(0,i.jsx)(o.CalculationSelector,{value:n.calculation,onChange:e=>{t((0,u.produce)(n,t=>{t.calculation=e}))}}),(0,i.jsx)(a.OptionsEditorControl,{label:"Max",control:(0,i.jsx)(l.Z,{type:"number",value:n.max??"",onChange:e=>{let r=e.target.value?Number(e.target.value):void 0;t((0,u.produce)(n,e=>{e.max=r}))},placeholder:h})})]})}),(0,i.jsx)(a.OptionsEditorColumn,{children:(0,i.jsx)(a.ThresholdsEditor,{thresholds:n.thresholds,onChange:e=>{t((0,u.produce)(n,t=>{t.thresholds=e}))}})})]})}}],createInitialOptions:function(){return{calculation:"last-number",format:r,thresholds:{steps:[{value:.8},{value:.9}]}}}}}}]);