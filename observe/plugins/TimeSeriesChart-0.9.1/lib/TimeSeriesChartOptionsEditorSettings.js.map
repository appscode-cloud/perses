{"version":3,"sources":["../../src/TimeSeriesChartOptionsEditorSettings.tsx"],"sourcesContent":["// Copyright 2023 The Perses Authors\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Button } from '@mui/material';\nimport { produce } from 'immer';\nimport {\n  OptionsEditorGroup,\n  OptionsEditorGrid,\n  OptionsEditorColumn,\n  ThresholdsEditor,\n  ThresholdsEditorProps,\n} from '@perses-dev/components';\nimport { LegendOptionsEditor, LegendOptionsEditorProps } from '@perses-dev/plugin-system';\nimport { ReactElement } from 'react';\nimport {\n  TimeSeriesChartOptions,\n  DEFAULT_VISUAL,\n  DEFAULT_Y_AXIS,\n  TimeSeriesChartOptionsEditorProps,\n} from './time-series-chart-model';\nimport { VisualOptionsEditor, VisualOptionsEditorProps } from './VisualOptionsEditor';\nimport { YAxisOptionsEditor, YAxisOptionsEditorProps } from './YAxisOptionsEditor';\nimport { QuerySettingsEditor, QuerySettingsEditorProps } from './QuerySettingsEditor';\n\nexport function TimeSeriesChartOptionsEditorSettings(props: TimeSeriesChartOptionsEditorProps): ReactElement {\n  const { onChange, value } = props;\n\n  const handleLegendChange: LegendOptionsEditorProps['onChange'] = (newLegend) => {\n    // TODO (sjcobb): fix type, add position, fix glitch\n    onChange(\n      produce(value, (draft: TimeSeriesChartOptions) => {\n        draft.legend = newLegend;\n      })\n    );\n  };\n\n  const handleVisualChange: VisualOptionsEditorProps['onChange'] = (newVisual) => {\n    onChange(\n      produce(value, (draft: TimeSeriesChartOptions) => {\n        draft.visual = newVisual;\n      })\n    );\n  };\n\n  const handleYAxisChange: YAxisOptionsEditorProps['onChange'] = (newYAxis) => {\n    onChange(\n      produce(value, (draft: TimeSeriesChartOptions) => {\n        draft.yAxis = newYAxis;\n      })\n    );\n  };\n\n  const handleQuerySettingsChange: QuerySettingsEditorProps['onChange'] = (newQuerySettings) => {\n    onChange(\n      produce(value, (draft: TimeSeriesChartOptions) => {\n        draft.querySettings = newQuerySettings;\n      })\n    );\n  };\n\n  const handleThresholdsChange: ThresholdsEditorProps['onChange'] = (thresholds) => {\n    onChange(\n      produce(value, (draft: TimeSeriesChartOptions) => {\n        draft.thresholds = thresholds;\n      })\n    );\n  };\n\n  return (\n    <OptionsEditorGrid>\n      <OptionsEditorColumn>\n        <LegendOptionsEditor value={value.legend} onChange={handleLegendChange} />\n        <VisualOptionsEditor value={value.visual ?? DEFAULT_VISUAL} onChange={handleVisualChange} />\n      </OptionsEditorColumn>\n      <OptionsEditorColumn>\n        <YAxisOptionsEditor value={value.yAxis ?? DEFAULT_Y_AXIS} onChange={handleYAxisChange} />\n      </OptionsEditorColumn>\n      <OptionsEditorColumn>\n        <ThresholdsEditor hideDefault thresholds={value.thresholds} onChange={handleThresholdsChange} />\n        <QuerySettingsEditor querySettingsList={value.querySettings} onChange={handleQuerySettingsChange} />\n        <OptionsEditorGroup title=\"Reset Settings\">\n          <Button\n            variant=\"outlined\"\n            color=\"secondary\"\n            onClick={() => {\n              onChange(\n                produce(value, (draft: TimeSeriesChartOptions) => {\n                  // reset button removes all optional panel options\n                  draft.yAxis = undefined;\n                  draft.legend = undefined;\n                  draft.visual = undefined;\n                  draft.thresholds = undefined;\n                  draft.querySettings = undefined;\n                })\n              );\n            }}\n          >\n            Reset To Defaults\n          </Button>\n        </OptionsEditorGroup>\n      </OptionsEditorColumn>\n    </OptionsEditorGrid>\n  );\n}\n"],"names":["Button","produce","OptionsEditorGroup","OptionsEditorGrid","OptionsEditorColumn","ThresholdsEditor","LegendOptionsEditor","DEFAULT_VISUAL","DEFAULT_Y_AXIS","VisualOptionsEditor","YAxisOptionsEditor","QuerySettingsEditor","TimeSeriesChartOptionsEditorSettings","props","onChange","value","handleLegendChange","newLegend","draft","legend","handleVisualChange","newVisual","visual","handleYAxisChange","newYAxis","yAxis","handleQuerySettingsChange","newQuerySettings","querySettings","handleThresholdsChange","thresholds","hideDefault","querySettingsList","title","variant","color","onClick","undefined"],"mappings":"AAAA,oCAAoC;AACpC,kEAAkE;AAClE,mEAAmE;AACnE,0CAA0C;AAC1C,EAAE;AACF,6CAA6C;AAC7C,EAAE;AACF,sEAAsE;AACtE,oEAAoE;AACpE,2EAA2E;AAC3E,sEAAsE;AACtE,iCAAiC;;AAEjC,SAASA,MAAM,QAAQ,gBAAgB;AACvC,SAASC,OAAO,QAAQ,QAAQ;AAChC,SACEC,kBAAkB,EAClBC,iBAAiB,EACjBC,mBAAmB,EACnBC,gBAAgB,QAEX,yBAAyB;AAChC,SAASC,mBAAmB,QAAkC,4BAA4B;AAE1F,SAEEC,cAAc,EACdC,cAAc,QAET,4BAA4B;AACnC,SAASC,mBAAmB,QAAkC,wBAAwB;AACtF,SAASC,kBAAkB,QAAiC,uBAAuB;AACnF,SAASC,mBAAmB,QAAkC,wBAAwB;AAEtF,OAAO,SAASC,qCAAqCC,KAAwC;IAC3F,MAAM,EAAEC,QAAQ,EAAEC,KAAK,EAAE,GAAGF;IAE5B,MAAMG,qBAA2D,CAACC;QAChE,oDAAoD;QACpDH,SACEb,QAAQc,OAAO,CAACG;YACdA,MAAMC,MAAM,GAAGF;QACjB;IAEJ;IAEA,MAAMG,qBAA2D,CAACC;QAChEP,SACEb,QAAQc,OAAO,CAACG;YACdA,MAAMI,MAAM,GAAGD;QACjB;IAEJ;IAEA,MAAME,oBAAyD,CAACC;QAC9DV,SACEb,QAAQc,OAAO,CAACG;YACdA,MAAMO,KAAK,GAAGD;QAChB;IAEJ;IAEA,MAAME,4BAAkE,CAACC;QACvEb,SACEb,QAAQc,OAAO,CAACG;YACdA,MAAMU,aAAa,GAAGD;QACxB;IAEJ;IAEA,MAAME,yBAA4D,CAACC;QACjEhB,SACEb,QAAQc,OAAO,CAACG;YACdA,MAAMY,UAAU,GAAGA;QACrB;IAEJ;IAEA,qBACE,MAAC3B;;0BACC,MAACC;;kCACC,KAACE;wBAAoBS,OAAOA,MAAMI,MAAM;wBAAEL,UAAUE;;kCACpD,KAACP;wBAAoBM,OAAOA,MAAMO,MAAM,IAAIf;wBAAgBO,UAAUM;;;;0BAExE,KAAChB;0BACC,cAAA,KAACM;oBAAmBK,OAAOA,MAAMU,KAAK,IAAIjB;oBAAgBM,UAAUS;;;0BAEtE,MAACnB;;kCACC,KAACC;wBAAiB0B,WAAW;wBAACD,YAAYf,MAAMe,UAAU;wBAAEhB,UAAUe;;kCACtE,KAAClB;wBAAoBqB,mBAAmBjB,MAAMa,aAAa;wBAAEd,UAAUY;;kCACvE,KAACxB;wBAAmB+B,OAAM;kCACxB,cAAA,KAACjC;4BACCkC,SAAQ;4BACRC,OAAM;4BACNC,SAAS;gCACPtB,SACEb,QAAQc,OAAO,CAACG;oCACd,kDAAkD;oCAClDA,MAAMO,KAAK,GAAGY;oCACdnB,MAAMC,MAAM,GAAGkB;oCACfnB,MAAMI,MAAM,GAAGe;oCACfnB,MAAMY,UAAU,GAAGO;oCACnBnB,MAAMU,aAAa,GAAGS;gCACxB;4BAEJ;sCACD;;;;;;;AAOX"}